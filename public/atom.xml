<?xml version="1.0" encoding="UTF-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title><![CDATA[Software MyZone]]></title>
  <subtitle><![CDATA[专注于iOS[cocos2d-x]、php、c/c++、ruby、java等技术领域 [Now cocos2d-x game developer]]]></subtitle>
  <link href="http://blog.firedragonpzy.com.cn/atom.xml" rel="self"/>
  <link href="http://blog.firedragonpzy.com.cn"/>
  <updated>2013-12-18T10:49:08.780Z</updated>
  <id>http://blog.firedragonpzy.com.cn/</id>
  <author>
    <name><![CDATA[firedragonpzy]]></name>
    <email><![CDATA[roy@firedragonpzy.com.cn]]></email>
  </author>
  <generator uri="http://zespia.tw/hexo">Hexo</generator>
  <entry>
    <title type="html"><![CDATA[Candy Crush 游戏制作注意事项]]></title>
    <link href="http://blog.firedragonpzy.com.cn/2013/12/18/Candy Crush 游戏制作注意事项/"/>
    <id>http://blog.firedragonpzy.com.cn/2013/12/18/Candy Crush 游戏制作注意事项/</id>
    <published>2013-12-18T14:45:45.000Z</published>
    <updated>2013-12-18T05:29:52.000Z</updated>
    <content type="html"><![CDATA[<p><strong><em>本文为firedragonpzy原创,转载务必在明显处注明：<br>        转载自【Softeware MyZone】原文链接: <a href="http://www.firedragonpzy.com.cn/index.php/archives/4159" target="_blank">http://www.firedragonpzy.com.cn/index.php/archives/4159</a></em></strong></p>
<p>每日一曲【咱们结婚吧！】<br> <embed src="http://www.xiami.com/widget/27050813_1772301196/singlePlayer.swf" type="application/x-shockwave-flash" width="257" height="33" wmode="transparent"></embed></p>
<p>写了第一篇<a href="http://www.firedragonpzy.com.cn/index.php/archives/4119" target="_blank">游戏制作及算法分析</a>之后，本来想写分析二来，后来考虑一下，还是先和大家分享下注意事项吧，或者说是这其中的易错点，在这期间也捎带说下部分算法，这样子基本就全了。</p>
<p><code>下面列举下注意事项：</code><br><a id="more"></a></p>
<ul>
<li>candy的创建及消除</li>
<li>candy消除后的下落</li>
<li>candy的展现</li>
<li>candy全局检测提示</li>
</ul>
<h2>下面先来讲述下：candy的创建及消除</h2>
<p>关于创建和消除，在了第一篇<a href="http://www.firedragonpzy.com.cn/index.php/archives/4119" target="_blank">游戏制作及算法分析</a>已经提及到，要在工厂中保存部分candy，这样能提高效率，防止每次不必要的创建以及消除。</p>
<h2>接来讲述下：消除后的下落</h2>
<p>关于下落，我们首先需要保证的是下落的速度一致，动作需要传入一个时间t，根据 t = s/v，我们把v定义为常量，每次获取距离即可。说完时间的获取，这时候我们就得全盘遍历棋盘，进行candy的下落处理。这里有个需要注意的地方，我们遍历，先遍历列再遍历行，平时的习惯是行了之后再遍历列。这里说下为什么先遍历列，因为你要保证下落的candy是连续的，假设一列有三个空缺，那你就需要在当前列的最后一行再加三行，每遍历完当前列的最后一行，重置下你的临时位置，让其再从最后一行的上一行开始。如果这里使用行列遍历，这时你后来新添加的candy容易发生位置错乱。</p>
<h2>接来讲述下：candy的展现</h2>
<p>关于游戏中使用到的candy，我们可以使用tp打包，这样子我们在程序中就可以加载一张纹理，这里也可以进行纹理的预加载，保证游戏的流畅性。多个candy打包后的另外一个好处就是我们可以使用精灵表，减少了渲染批次，大大提高了效率。我们把精灵表加载到游戏层，完后我一个个candy加入到精灵表中，精灵表上的个数为棋盘的个数。这就必须保证每次我们销毁一个candy的时候进行精灵的持有、设置不显示和从精灵表上移除的操作。</p>
<h2>最后再说下candy的全局检测提示</h2>
<p>关于检测，我这里提供两种方案：</p>
<ol>
<li>模拟移动，即你将candy移动到需要的地方进行周边检测 </li>
<li>每次获取三个进行周边检测，获取相邻三个，检测下是不是有两个同类型的，如果有则记录下在这三个之中不同类型的candy的位置。完后进行周边检测。假设我们三个的标识分别为0、1、2，则0只需要检测上、左和下边即可，1只需要检测上和下边即可，2只需要检测上、右和下即可。这里要注意边界情况的处理。</li>
</ol>
<p>关于这个检测，我们要考虑到特殊主体，上面只是讲解了普通主体的判断，注意：普通主体判断我们只需要检测三个即可。</p>
<p>说到特殊主体，这个容易被忽略。超级主体：百消球，只要有一个即可，除了百消球和普通主体，其余的只要有两个相连即可提示。</p>
<h2>目前就这些问题，如果有其余注意事项，后续补充……</h2>
<div align="center"><span style="color: red;">欢迎热爱编程的朋友们参与到cocos2d-x编程中，为了给大家提供良好的交流环境，网站以开启QQ群<br>Software MyZone：66202765（群号，欢迎加入,若满，请加1群）<br>Software MyZone 1群(2dx)：286504621<br>【加群请写：Software MyZone或者是firedragonpzy】<br><strong><span style="color: #800000;">淘宝店：<span style="color: #0000ff;"><a href="http://roy-pang.taobao.com" target="_blank"><span style="color: #0000ff;">【应小心的易淘屋】</span></a></span>初次开店，大家多多支持……</span></strong><br>群论坛：<a href="http://bbs.firedragonpzy.com.cn/forum.php" target="_blank"><span style="color: blue;">火龙论坛</span></a>正试运营阶段，欢迎大家多提些建设性意见……</span></div>]]></content>
    <category scheme="http://blog.firedragonpzy.com.cn/tags/cocos2d-x/" term="cocos2d-x"/>
    <category scheme="http://blog.firedragonpzy.com.cn/categories/cocos2d-x/" term="cocos2d-x"/>
  </entry>
  <entry>
    <title type="html"><![CDATA[Candy Crush 游戏制作及消除算法分析]]></title>
    <link href="http://blog.firedragonpzy.com.cn/2013/12/16/Candy Crush 游戏制作及消除算法分析/"/>
    <id>http://blog.firedragonpzy.com.cn/2013/12/16/Candy Crush 游戏制作及消除算法分析/</id>
    <published>2013-12-16T14:45:45.000Z</published>
    <updated>2013-12-18T05:38:07.000Z</updated>
    <content type="html"><![CDATA[<p><strong><em>本文为firedragonpzy原创,转载务必在明显处注明：<br>        转载自【Softeware MyZone】原文链接: <a href="http://www.firedragonpzy.com.cn/index.php/archives/4119" target="_blank">http://www.firedragonpzy.com.cn/index.php/archives/4119</a></em></strong></p>
<p>每日一曲【程序猿需要激情，high起来吧！】<br>  <embed src="http://www.xiami.com/widget/0_3515679/singlePlayer.swf" type="application/x-shockwave-flash" width="257" height="33" wmode="transparent"></embed><br>最近做类似Candy Crush的消除类游戏，现在和大家分享下关于candy移动消除这一块，望大神们多多指点……</p>
<p>首先，移动后candy的消除分为两大类，第一大类就是你移动交换的两个candy发生消除，例如你移动百消球和临近的普通candy进行交换，这时候消除和普通candy颜色一样的candy。</p>
<p>第二大类是你移动后，相临的大于等于三个candy的可以产生消除。<br><a id="more"></a></p>
<h2>现在分析下第一大类：两个交换移动之后产生消除。</h2>
<p>这一大类有以下两种情况：</p>
<ul>
<li>相同颜色的candy</li>
<li>不同颜色的candy</li>
</ul>
<p>对了，在这里说一下candy的创建。<br>candy我是利用工厂模式创建的，第一层分类为颜色，第二层分类为某种颜色下横【横闪】、竖【纵闪】和方块【爆炸圈】，最终肯定有个特殊【百消球】。</p>
<p><em>关于相同颜色的candy</em>：<br>这时候分为以下几种情况：</p>
<ul>
<li>百消球 和 百消球</li>
<li>爆炸圈 和 爆炸圈</li>
<li>爆炸圈 和 纵横闪</li>
<li>纵横闪 和 纵横闪</li>
<li>爆炸圈 和 普通</li>
<li>纵横闪 和 普通</li>
<li>普通 和 普通</li>
</ul>
<p>其中前四类是需要特殊处理的，后三类列为其他情况即可。其他情况只需要进行个返回原位置操作即可。</p>
<p><em>关于不同颜色的candy</em>：</p>
<p>这时候分为以下几种情况：</p>
<ul>
<li>百消球 和 爆炸圈</li>
<li>百消球 和 纵横闪</li>
<li>百消球 和 普通</li>
<li>爆炸圈 和 爆炸圈</li>
<li>爆炸圈 和 纵横闪</li>
<li>纵横闪 和 纵横闪</li>
<li>爆炸圈 和 普通</li>
<li>纵横闪 和 普通</li>
<li>普通    和 普通<br>其中前六类是需要特殊处理的，后三类列为其他情况即可。其他情况只需要进行个返回原位置操作即可。</li>
</ul>
<h2>然后分析下第二大类：移动后，相临的大于等于三个candy的可以产生消除。</h2>
<p>这时候先分析下如果相邻的没有特殊的candy，即交换能构成消除，三个candy消除，四个根据方向形成纵闪或横闪，五个纵或横形成百消球，五个但是带折角的形成爆炸圈。这时候在交换的那个位置形成特殊的candy即可。</p>
<p>在完成这个操作之后，可能会产生特殊的candy，这时候如果我们再进行移动交换，移动完毕后就可能在这相邻的里面有特殊的，我们先处理这些特殊的，然后再和原有该消除的合并即可。</p>
<p>关于数据的存储处理，大家可以在candy中加个标识，表示当前candy是否加入到了vector【即将被消除的candy】中。</p>
<p>消除类游戏主要是写好逻辑算法，让其达到最优。我制作游戏期间出现最多的问题就是这个应该消除的candy怎么个存储法。</p>
<h2>主体思路，简单说下：</h2>
<p>在主场景中加入你的游戏层，我习惯性是GameLayer，此文件中两个类，一个是CGameLayer,一个是CChessBox，CChessBox就是你的candy布局，在这里我称之为棋盘，注意CGameLayer创建的时候要留好接口，比如关卡信息，游戏层的位置。为什么要留游戏层的位置这个接口呢？因为你的棋盘不可能是固定不变的，不同的关卡位置可能发生变化，这样子你留好了位置接口之后就可以在不再用引擎那费劲的转化，到时候自己再判断区域的时候处理下x/y即可。</p>
<p>说完接口，我们简单再说下这个棋盘，为什么要有棋盘呢？因为我们看到的cand的移动，其实就是忽悠人的，我们程序操作的都是棋盘。下面看下我的棋盘接口：</p>
<figure class="highlight lang-c++"><table><tr><td class="gutter"><pre>1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
</pre></td><td class="code"><pre><span class="keyword">public</span>:
    CChessBox();
    ~CChessBox(){}
    
<span class="keyword">private</span>:
    CC_SYNTHESIZE(<span class="keyword">int</span>, m_nRowIndex, RowIndex); <span class="comment">// 行索引</span>
    CC_SYNTHESIZE(<span class="keyword">int</span>, m_nLineIndex, LineIndex); <span class="comment">// 列索引</span>
    
    CC_SYNTHESIZE(<span class="keyword">short</span>, m_nRowUpBoxNums, RowUpBoxNums);<span class="comment">// 行上的candy数</span>
    CC_SYNTHESIZE(<span class="keyword">short</span>, m_nRowDownBoxNums, RowDownBoxNums); <span class="comment">// 行下的candy数</span>
    CC_SYNTHESIZE(<span class="keyword">short</span>, m_nLineLeftBoxNums, LineLeftBoxNums); <span class="comment">// 列左的candy数</span>
    CC_SYNTHESIZE(<span class="keyword">short</span>, m_nLineRightBoxNums, LineRightBoxNums); <span class="comment">// 列右的candy数</span>
    
    CC_SYNTHESIZE(CCRect, m_pRect, Rect); <span class="comment">// 是否点击candy</span>
    CC_SYNTHESIZE(CCRect, m_pAtlasRect, AtlasRect); <span class="comment">// candy和candy的碰撞区域</span>
    CC_SYNTHESIZE(CCPoint, m_pCenterPoint, CenterPoint); <span class="comment">// candy的位置</span>
    CC_SYNTHESIZE(CBoxContent*, m_pBoxContent, BoxContent); <span class="comment">// 棋盘存放的内容</span>
};
</pre></td></tr></table></figure>

<p>其中CBoxContent如下：</p>
<figure class="highlight lang-c++"><table><tr><td class="gutter"><pre>1
2
3
4
5
6
7
8
9
10
11
12
</pre></td><td class="code"><pre><span class="class"><span class="keyword">class</span> <span class="title">CBoxContent</span> :</span> public CCObject {
    
public:
    CBoxContent() : m_pSkin(NULL), m_nRowIndex(<span class="number">0</span>), m_nLineIndex(<span class="number">0</span>)
    {
    }
    
private:
    CC_SYNTHESIZE(CCandy*, m_pSkin, Skin); // 皮肤及表示candy
    CC_SYNTHESIZE(int, m_nRowIndex, RowIndex);
    CC_SYNTHESIZE(int, m_nLineIndex, LineIndex);
};
</pre></td></tr></table></figure>

<p>在游戏层中存放个可变长的CChessBox数组，这样子游戏的棋盘就出来了。点击移动操作什么的都是针对棋盘，而CBoxContent就是个表现，有些同学这时候会问为什么为什么要有CBoxContent,其实我之前的行上列左等都是CBoxContent的属性，后来调节给了CChessBox，行上等属性在CBoxContent中很不方便，另外在CBoxContent添加m_pSkin存放candy也是为了后期的扩展。</p>
<p>友情提醒下，就是移动后candy的删除问题。你最好在你的工厂中保存下释放的candy，这样子可以提高效率，避免每次都创建精灵。</p>
<p>我的工厂就提供了释放和新建CBoxContent方法，如下:</p>
<figure class="highlight lang-c++"><table><tr><td class="gutter"><pre>1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
</pre></td><td class="code"><pre><span class="keyword">void</span> IFactory::freeBoxContent(CBoxContent* boxContent)
{
	boxContent-&gt;getSkin()-&gt;retain();
	boxContent-&gt;getSkin()-&gt;setVisible(<span class="keyword">false</span>);
	boxContent-&gt;getSkin()-&gt;removeFromParentAndCleanup(<span class="keyword">true</span>);
	m_pFreeBoxContentVector.push_back(boxContent);
	<span class="keyword">delete</span> boxContent;
	boxContent = NULL;
}

CBoxContent* IFactory::getNewBoxContent()
{
	CBoxContent *box = NULL;
	<span class="keyword">if</span> (m_pFreeBoxContentVector.size() &gt; <span class="number">0</span>)
	{
		box = m_pFreeBoxContentVector.back();
		m_pFreeBoxContentVector.pop_back();
		box-&gt;getSkin()-&gt;setVisible(<span class="keyword">true</span>);
	}<span class="keyword">else</span>
	{
		IFactory *factory;
		<span class="keyword">short</span> typeFlag = CCRANDOM_0_1()*m_nCandyTypeNums;
        
		<span class="keyword">switch</span> (typeFlag)
		{
            <span class="keyword">case</span> CANDY_TYPE_GREEN:
                factory = <span class="keyword">dynamic_cast</span>&lt;CFactoryGreen*&gt;(<span class="keyword">new</span> CFactoryGreen());
                <span class="keyword">break</span>;
            <span class="keyword">case</span> CANDY_TYPE_ORANGE:
                factory = <span class="keyword">dynamic_cast</span>&lt;CFactoryOrange*&gt;(<span class="keyword">new</span> CFactoryOrange());
                <span class="keyword">break</span>;
            <span class="keyword">case</span> CANDY_TYPE_PURPLE:
                factory = <span class="keyword">dynamic_cast</span>&lt;CFactoryPurple*&gt;(<span class="keyword">new</span> CFactoryPurple());
                <span class="keyword">break</span>;
            <span class="keyword">case</span> CANDY_TYPE_RED:
                factory = <span class="keyword">dynamic_cast</span>&lt;CFactoryRed*&gt;(<span class="keyword">new</span> CFactoryRed());
                <span class="keyword">break</span>;
            <span class="keyword">case</span> CANDY_TYPE_YELLOW:
                factory = <span class="keyword">dynamic_cast</span>&lt;CFactoryYellow*&gt;(<span class="keyword">new</span> CFactoryYellow());
                <span class="keyword">break</span>;
            <span class="keyword">default</span>:
                factory = <span class="keyword">dynamic_cast</span>&lt;CFactoryGreen*&gt;(<span class="keyword">new</span> CFactoryGreen());
                <span class="keyword">break</span>;
		}
        
		box = <span class="keyword">new</span> CBoxContent();
		box-&gt;setSkin(factory-&gt;_doCreateTypeByFactory());
	}
	<span class="keyword">return</span> box;
}
</pre></td></tr></table></figure>

<h2>哦，不早了，该洗洗睡了，就先写这些吧，后续补充……</h2>
<div align="center"><span style="color: red;">欢迎热爱编程的朋友们参与到cocos2d-x编程中，为了给大家提供良好的交流环境，网站以开启QQ群<br>Software MyZone：66202765（群号，欢迎加入,若满，请加1群）<br>Software MyZone 1群(2dx)：286504621<br>【加群请写：Software MyZone或者是firedragonpzy】<br><strong><span style="color: #800000;">淘宝店：<span style="color: #0000ff;"><a href="http://roy-pang.taobao.com" target="_blank"><span style="color: #0000ff;">【应小心的易淘屋】</span></a></span>初次开店，大家多多支持……</span></strong><br>群论坛：<a href="http://bbs.firedragonpzy.com.cn/forum.php" target="_blank"><span style="color: blue;">火龙论坛</span></a>正试运营阶段，欢迎大家多提些建设性意见……</span></div>]]></content>
    <category scheme="http://blog.firedragonpzy.com.cn/tags/cocos2d-x/" term="cocos2d-x"/>
    <category scheme="http://blog.firedragonpzy.com.cn/categories/cocos2d-x/" term="cocos2d-x"/>
  </entry>
  <entry>
    <title type="html"><![CDATA[hexo系列教程：（四）hexo博客的优化技巧续 转]]></title>
    <link href="http://blog.firedragonpzy.com.cn/2013/12/13/hexo-guide-4/"/>
    <id>http://blog.firedragonpzy.com.cn/2013/12/13/hexo-guide-4/</id>
    <published>2013-12-13T00:17:28.000Z</published>
    <updated>2013-12-14T05:04:51.000Z</updated>
    <content type="html"><![CDATA[<hr>
<p><strong>转载自：</strong><a href="http://zipperary.com/2013/06/02/hexo-guide-5/" target="_blank">http://zipperary.com/2013/06/02/hexo-guide-5/</a><br><strong><code>感谢moxie提供</code></strong></p>
<p>每日一曲【程序猿找媳妇不容易，付出生命吧！】</p>
<embed src="http://www.xiami.com/widget/27050813_1772301193/singlePlayer.swf" type="application/x-shockwave-flash" width="257" height="33" wmode="transparent"></embed>

<p>继续介绍hexo博客的优化和使用。<br><a id="more"></a></p>
<h3>添加RSS</h3>
<p>hexo提供了RSS的生成插件，需要手动安装和设置。步骤如下：</p>
<ol>
<li>安装RSS插件到本地：<code>npm install hexo-generator-feed --save</code></li>
<li><p>开启RSS功能：编辑<code>hexo/_config.yml</code>，添加如下代码：</p>
<figure class="highlight"><table><tr><td class="gutter"><pre>1
2
</pre></td><td class="code"><pre><span class="comment">plugins:</span>
<span class="literal">-</span> <span class="comment">hexo</span>-<span class="comment">generator</span>-<span class="comment">feed
</pre></td></tr></table></figure>
</li>
<li><p>在站点添加链接：<br>在<code>themes/light/_config.yml</code>中，编辑 <code>rss: /atom.xml</code><br>在<code>themes/light/layout/_partial/header.ejs</code>中，<code>&lt;ul&gt;&lt;/ul&gt;</code>之间，添加一样代码<code>&lt;li&gt; &lt;a href=&quot;/atom.xml&quot;&gt;RSS&lt;/a&gt; &lt;/li&gt;</code></p>
</li>
</ol>
<h3>添加sitemap</h3>
<p>同样的，我们使用hexo提供的插件，方法与添加RSS类似。</p>
<ol>
<li>安装sitemap到本地：<code>npm install hexo-generator-sitemap --save</code></li>
<li><p>开启sitemap功能：编辑<code>hexo/_config.yml</code>，添加如下代码：</p>
<figure class="highlight"><table><tr><td class="gutter"><pre>1
2
</pre></td><td class="code"><pre><span class="comment">plugins:</span>
<span class="literal">-</span> <span class="comment">hexo</span>-<span class="comment">generator</span>-<span class="comment">sitemap
</pre></td></tr></table></figure>
</li>
<li><p>访问<code>zipperary/sitemap.xml</code>即可看到站点地图。不过，sitemap的初衷是给搜索引擎看的，为了提高搜索引擎对自己站点的收录效果，我们最好手动到google和百度等搜索引擎提交sitemap.xml。</p>
</li>
</ol>
<h3>设置百度统计、Google Analytics</h3>
<p>到<a href="http://tongji.baidu.com/web/welcome/login" target="_blank">百度统计</a>和<a href="http://www.google.com/analytics/" target="_blank">Google Analytics</a>（可能需要穿墙）注册账号、添加网站地址即可，很简单，不详述了。需要注意的是，设置好之后数据要过几个小时才能出现，不用着急。</p>
<h3>文章中插入图片</h3>
<p>使用markdown写文章，插入图片的格式为<code>![图片名称](链接地址)</code>，这里要说的是链接地址怎么写。对于hexo，有两种方式：</p>
<ol>
<li>使用本地路径：在<code>hexo/source</code>目录下新建一个<code>img</code>文件夹，将图片放入该文件夹下，插入图片时链接即为<code>/img/图片名称</code>。</li>
<li>使用<em>微博图床</em>，地址<a href="http://weibotuchuang.sinaapp.com/" target="_blank">http://weibotuchuang.sinaapp.com/</a>，将图片拖入区域中，会生成图片的URL，这就是链接地址。</li>
</ol>
<h3>bug:「warning: LF will be replaced by CRLF」</h3>
<p>在<code>hexo deploy</code>时，有时会出现这个提示信息<code>warning: LF will be replaced by CRLF</code>，虽然看起来挺乱糟糟的，但不影响使用，可以忽略不计。若想不提示，可以使用如下方法：</p>
<ol>
<li>切换到博客的根目录，执行如下命令：<code>git config --global core.autocrlf  false</code></li>
<li>删除掉该目录下的<code>.git</code>文件夹（可能是隐藏的），命令：<code>rm -rf .git</code></li>
<li>重新<code>git init</code>。</li>
</ol>
<p>再deploy试试吧，清新脱俗了。</p>
<h3>bug:<code>hexo deploy</code>没反应</h3>
<p>好多网友遇到过这个问题，目前来看，主要问题出在config.yml的deploy配置上。注意缩进，同时注意冒号后面要有一个空格。</p>
<h3>bug:<code>hexo update -g</code>升级错误，hexo命令失效</h3>
<p>我升级时遇到了这个问题，原因不详。这种情况下，可执行<code>npm install -g hexo</code>重新安装一遍hexo，效果跟升级一样。各版本所做更新修正，请参考<a href="https://github.com/tommy351/hexo/releases" target="_blank">这里</a>。</p>
<h3>bug:搜索框进行搜索：没有结果</h3>
<p>点击搜索后进入的google页面，搜索框里面是不是显示「site:yoursite.com」，这说明有个地方没有设置，请随我来：</p>
<p>打开根目录下的config文件，第15行，<code>url:</code>，自觉填上吧。</p>
<hr>
]]></content>
    <category scheme="http://blog.firedragonpzy.com.cn/tags/hexo/" term="hexo"/>
    <category scheme="http://blog.firedragonpzy.com.cn/categories/hexo/" term="hexo"/>
  </entry>
  <entry>
    <title type="html"><![CDATA[hexo系列教程：（三）hexo博客的优化技巧 转]]></title>
    <link href="http://blog.firedragonpzy.com.cn/2013/12/13/hexo-guide-3/"/>
    <id>http://blog.firedragonpzy.com.cn/2013/12/13/hexo-guide-3/</id>
    <published>2013-12-12T23:28:53.000Z</published>
    <updated>2013-12-14T05:04:51.000Z</updated>
    <content type="html"><![CDATA[<p><strong>转载自：</strong><a href="http://zipperary.com/2013/05/30/hexo-guide-4/" target="_blank">http://zipperary.com/2013/05/30/hexo-guide-4/</a><br><strong><code>感谢moxie提供</code></strong></p>
<p>每日一曲【程序猿找媳妇不容易，付出生命吧！】</p>
<embed src="http://www.xiami.com/widget/27050813_1772301193/singlePlayer.swf" type="application/x-shockwave-flash" width="257" height="33" wmode="transparent"></embed>

<p>上一节中我们已经学会了用hexo发布博客，这里再介绍一些小技巧对博客站点进行优化，实现更加丰富的功能。</p>
<p><a id="more"></a></p>
<h3>添加“多说”评论</h3>
<p>hexo默认使用国外比较流行的disqus，不过，按照“因地制宜”的原则，我们修改为国内用的多又好用的“多说”评论系统。步骤非常简单：<br>1. 在<a href="http://duoshuo.com/" target="_blank">多说</a>进行注册，获得通用代码。<br>2. 将通用代码粘贴到<code>themes\light\layout\_partial\comment.ejs</code>里面，如下：</p>
<figure class="highlight lang-html"><table><tr><td class="gutter"><pre>1
2
3
4
5
</pre></td><td class="code"><pre><span class="vbscript">&lt;% <span class="keyword">if</span> ( page.comments){ %&gt;</span>
<span class="tag">&lt;<span class="title">section</span> <span class="attribute">id</span>=<span class="value">"comment"</span>&gt;</span>
通用代码
<span class="tag">&lt;/<span class="title">section</span>&gt;</span>
<span class="vbscript">&lt;% } %&gt;</span>
</pre></td></tr></table></figure>

<h3>添加“百度分享”</h3>
<p>到<a href="http://share.baidu.com/code" target="_blank">百度分享</a>获得代码，在<code>themes/light/layout/_partial/article.ejs</code>中，将<code>&lt;%-partial(&#39;post/share&#39;)%&gt;</code>删掉，替换为百度分享的代码。</p>
<h3>添加小图标</h3>
<p>在<code>themes/light/layout/_partial/head.ejs</code>里将<code>&lt;link href=&quot;&lt;%- config.root %&gt;favicon.png&quot; rel=&quot;icon&quot;&gt;</code>替换为<code>&lt;link href=&quot;&lt;%- config.root %&gt;favicon.ico&quot; rel=&quot;icon&quot; type=&quot;image/x-ico&quot;&gt;</code>。将favicon.ico图标文件放在source目录下。制作图标的网站，<a href="http://www.faviconer.com" target="_blank">http://www.faviconer.com</a>。</p>
<h3>添加分类、标签云widget</h3>
<p>很简单，在<code>themes/light/_config.yml</code>中，添加如下：</p>
<figure class="highlight"><table><tr><td class="gutter"><pre>1
2
3
</pre></td><td class="code"><pre><span class="comment">widgets:</span>
<span class="literal">-</span> <span class="comment">category</span>
<span class="literal">-</span> <span class="comment">tagcloud
</pre></td></tr></table></figure>

<h3>添加友情链接widget</h3>
<ol>
<li><p>在<code>themes/light/layout/_widget</code>中新建名为<code>blogroll.ejs</code>的文件，编辑内容如下：</p>
<figure class="highlight lang-html"><table><tr><td class="gutter"><pre>1
2
3
4
5
6
</pre></td><td class="code"><pre><span class="tag">&lt;<span class="title">div</span> <span class="attribute">class</span>=<span class="value">"widget tag"</span>&gt;</span>
<span class="tag">&lt;<span class="title">h3</span> <span class="attribute">class</span>=<span class="value">"title"</span>&gt;</span>友情链接<span class="tag">&lt;/<span class="title">h3</span>&gt;</span>
<span class="tag">&lt;<span class="title">ul</span> <span class="attribute">class</span>=<span class="value">"entry"</span>&gt;</span>
<span class="tag">&lt;<span class="title">li</span>&gt;</span><span class="tag">&lt;<span class="title">a</span> <span class="attribute">href</span>=<span class="value">"http://zipperary.com/"</span> <span class="attribute">title</span>=<span class="value">"Zippera's Blog"</span>&gt;</span>Zippera<span class="tag">&lt;/<span class="title">a</span>&gt;</span><span class="tag">&lt;/<span class="title">li</span>&gt;</span>
<span class="tag">&lt;/<span class="title">ul</span>&gt;</span>
<span class="tag">&lt;/<span class="title">div</span>&gt;</span>
</pre></td></tr></table></figure>
</li>
<li><p>在<code>themes/light/_config.yml</code>中，添加如下：</p>
<figure class="highlight"><table><tr><td class="gutter"><pre>1
2
</pre></td><td class="code"><pre><span class="comment">widgets:</span>
<span class="literal">-</span> <span class="comment">blogroll
</pre></td></tr></table></figure>

</li>
</ol>
<h3>生成post时默认生成categories配置项</h3>
<p>在<code>scaffolds/post.md</code>中，添加一行<code>categories:</code>。同理可应用在<code>page.md</code>和<code>photo.md</code>。</p>
<h3>添加新浪微博widget(微博秀)</h3>
<ol>
<li>去<a href="http://open.weibo.com/widget/weibotopic.php" target="_blank">新浪微博开放平台</a>设置和生成微博秀代码。</li>
<li>在<code>themes/light/layout/_widget</code>中新建名为<code>weibo.ejs</code>的文件，将刚才的代码直接保存到这里。</li>
<li>在<code>themes/light/_config.yml</code>中，添加如下：<figure class="highlight"><table><tr><td class="gutter"><pre>1
2
</pre></td><td class="code"><pre><span class="comment">widgets:</span>
<span class="literal">-</span> <span class="comment">weibo
</pre></td></tr></table></figure>

</li>
</ol>
<h3>导航栏添加“关于”</h3>
<ol>
<li><code>hexo new page &quot;about&quot;</code></li>
<li>到<code>source/about/index.md</code>编辑内容。</li>
<li>在<code>themes/light/_config.yml</code>中，添加如下：<figure class="highlight"><table><tr><td class="gutter"><pre>1
2
</pre></td><td class="code"><pre><span class="keyword">menu</span>:
  关于: /<span class="keyword">about</span>
</pre></td></tr></table></figure>

</li>
</ol>
<h3>主页文章显示摘要</h3>
<p>编辑md文件的时候，在要作为摘要的文字后面添加<code>&lt;!--more--&gt;</code>即可。</p>
<p>优化是无止境的，今天先写这些。</p>
<hr>
]]></content>
    <category scheme="http://blog.firedragonpzy.com.cn/tags/hexo/" term="hexo"/>
    <category scheme="http://blog.firedragonpzy.com.cn/categories/hexo/" term="hexo"/>
  </entry>
  <entry>
    <title type="html"><![CDATA[hexo系列教程：（二）hexo博客的配置、使用 转]]></title>
    <link href="http://blog.firedragonpzy.com.cn/2013/12/12/hexo-guide-2/"/>
    <id>http://blog.firedragonpzy.com.cn/2013/12/12/hexo-guide-2/</id>
    <published>2013-12-12T09:28:53.000Z</published>
    <updated>2013-12-14T05:04:51.000Z</updated>
    <content type="html"><![CDATA[<hr>
<p><strong>转载自：</strong><a href="http://zipperary.com/2013/05/29/hexo-guide-3/" target="_blank">http://zipperary.com/2013/05/29/hexo-guide-3/</a><br><strong><code>感谢moxie提供</code></strong></p>
<p>每日一曲【程序猿太累，休息会吧！】</p>
<embed src="http://www.xiami.com/widget/27050813_1772245372/singlePlayer.swf" type="application/x-shockwave-flash" width="257" height="33" wmode="transparent"></embed>

<p>在上一节中，我们在本地和github搭建起了自己的hexo博客站点，但是还未发表过文章，站点的配置还是原来的默认值。在本节，我们来进行个性化的设置，将站点打造成自己的，同时介绍下怎么撰文和发表。<br><a id="more"></a></p>
<p>站点配置用到两个文件，一个是对整站的配置<code>H:\hexo\_config.yml</code>，另一个是对主题的配置<code>H:\hexo\themes\light_config.yml</code>，我们来分别介绍。</p>
<p><em>H:\hexo\ _config.yml</em></p>
<figure class="highlight"><table><tr><td class="gutter"><pre>1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
</pre></td><td class="code"><pre><span class="preprocessor"># Hexo Configuration</span>
<span class="preprocessor">## Docs: http://zespia.tw/hexo/docs/configure.html</span>
<span class="preprocessor">## Source: https://github.com/tommy351/hexo/</span>

<span class="preprocessor"># Site 这里的配置，哪项配置反映在哪里，可以参考我的博客</span>
<span class="label">title:</span> Hexo blog <span class="preprocessor">#站点名，站点左上角</span>
<span class="label">subtitle:</span> Walk steps step by step <span class="preprocessor">#副标题，站点左上角</span>
<span class="label">description:</span> Walk steps step by step <span class="preprocessor">#给搜索引擎看的，对站点的描述，可以自定义</span>
<span class="label">author:</span> 作者名称 <span class="preprocessor">#在站点左下角可以看到</span>
<span class="label">email:</span> <span class="preprocessor">#你的联系邮箱</span>
<span class="label">language:</span> <span class="built_in">zh</span>-CN <span class="preprocessor">#中国人嘛，用中文</span>

<span class="preprocessor"># URL #这项暂不配置，绑定域名后，欲创建sitemap.xml需要配置该项</span>
<span class="preprocessor">## If your site is put in a subdirectory, set url as 'http://yoursite.com/child' and root as '/child/'</span>
<span class="label">url:</span> http://blog<span class="preprocessor">.firedragonpzy</span><span class="preprocessor">.com</span><span class="preprocessor">.cn</span>
<span class="label">root:</span> /
<span class="label">permalink:</span> :year/:month/:day/:title/
<span class="label">tag_dir:</span> tags
<span class="label">archive_dir:</span> archives
<span class="label">category_dir:</span> categories

<span class="preprocessor"># Writing 文章布局、写作格式的定义，不修改</span>
<span class="label">new_post_name:</span> :title<span class="preprocessor">.md</span> <span class="preprocessor"># File name of new posts</span>
<span class="label">default_layout:</span> post
<span class="label">auto_spacing:</span> false <span class="preprocessor"># Add spaces between asian characters and western characters</span>
<span class="label">titlecase:</span> false <span class="preprocessor"># Transform title into titlecase</span>
<span class="label">max_open_file:</span> <span class="number">100</span>
<span class="label">filename_case:</span> <span class="number">0</span>
<span class="label">highlight:</span>
  enable: true
  backtick_code_block: true
  line_number: true
  tab_replace:

<span class="preprocessor"># Category & Tag</span>
<span class="label">default_category:</span> uncategorized
<span class="label">category_map:</span>
<span class="label">tag_map:</span>

<span class="preprocessor"># Archives 默认值为2，这里都修改为1，相应页面就只会列出标题，而非全文</span>
<span class="preprocessor">## 2: Enable pagination</span>
<span class="preprocessor">## 1: Disable pagination</span>
<span class="preprocessor">## 0: Fully Disable</span>
<span class="label">archive:</span> <span class="number">1</span>
<span class="label">category:</span> <span class="number">1</span>
<span class="label">tag:</span> <span class="number">1</span>

<span class="preprocessor"># Server 不修改</span>
<span class="preprocessor">## Hexo uses Connect as a server</span>
<span class="preprocessor">## You can customize the logger format as defined in</span>
<span class="preprocessor">## http://www.senchalabs.org/connect/logger.html</span>
<span class="label">port:</span> <span class="number">4000</span>
<span class="label">logger:</span> false
<span class="label">logger_format:</span>

<span class="preprocessor"># Date / Time format 日期格式，不修改</span>
<span class="preprocessor">## Hexo uses Moment.js to parse and display date</span>
<span class="preprocessor">## You can customize the date format as defined in</span>
<span class="preprocessor">## http://momentjs.com/docs/#/displaying/format/</span>
<span class="label">date_format:</span> MMM D YYYY
<span class="label">time_format:</span> H:mm:ss

<span class="preprocessor"># Pagination 每页显示文章数，可以自定义，我将10改成了5</span>
<span class="preprocessor">## Set per_page to 0 to disable pagination</span>
<span class="label">per_page:</span> <span class="number">5</span>
<span class="label">pagination_dir:</span> page

<span class="preprocessor"># Disqus Disqus插件，我们会替换成“多说”，不修改</span>
<span class="label">disqus_shortname:</span>

<span class="preprocessor"># Extensions 这里配置站点所用主题和插件，暂默认，后面会介绍怎么修改</span>
<span class="preprocessor">## Plugins: https://github.com/tommy351/hexo/wiki/Plugins</span>
<span class="preprocessor">## Themes: https://github.com/tommy351/hexo/wiki/Themes</span>
<span class="label">theme:</span> light
<span class="label">exclude_generator:</span>
<span class="label">plugins:</span>
- hexo-generator-feed
- hexo-generator-sitemap

<span class="preprocessor"># Deployment 站点部署到github要配置，上一节中已经讲过</span>
<span class="preprocessor">## Docs: http://zespia.tw/hexo/docs/deploy.html</span>
<span class="label">deploy:</span>
  type: github
  repository: https://github<span class="preprocessor">.com</span>/firedragonpzy/firedragonpzy<span class="preprocessor">.github</span><span class="preprocessor">.io</span><span class="preprocessor">.git</span>
  branch: master
</pre></td></tr></table></figure>

<p>现在可以<code>hexo generate</code>，<code>hexo server</code>，打开<code>localhost:4000</code>查看效果了。</p>
<p><em>H:\hexo\themes\light_config.yml</em></p>
<figure class="highlight"><table><tr><td class="gutter"><pre>1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
</pre></td><td class="code"><pre><span class="method">menu:</span> #站点右上角导航栏，暂时默认，后面介绍修改
  首页: /
  存档: /archives
  关于: /about
  <span class="class">ToDo</span>: /todolist
  

<span class="method">widgets:</span> #站点右边栏，暂时默认，后面介绍修改和添加
- search
- category
- tagcloud
- weibo
- blogroll


<span class="method">excerpt_link:</span> 阅读全文 #替换为中文

<span class="method">plugins:</span> 


<span class="method">twitter:</span> #右边栏要显示twitter展示的话，需要在此设置
  <span class="method">username:</span> moxie198
  <span class="method">show_replies:</span> <span class="keyword">false</span>
  <span class="method">tweet_count:</span> <span class="number">5</span>

<span class="method">addthis:</span> <span class="symbol">#SNS</span>分享，身在天朝，当然用“百度分享”，暂时默认，后面会介绍
  <span class="method">enable:</span> <span class="keyword">true</span>
  <span class="method">pubid:</span>
  <span class="method">facebook:</span> <span class="keyword">true</span>
  <span class="method">twitter:</span> <span class="keyword">true</span>
  <span class="method">google:</span> <span class="keyword">true</span>
  <span class="method">pinterest:</span> <span class="keyword">true</span>

<span class="method">fancybox:</span> <span class="keyword">true</span> #图片效果，默认

<span class="method">google_analytics:</span> #要使用google_analytics进行统计的话，这里需要配置<span class="class">ID</span>，暂时默认，后面介绍
<span class="method">rss:</span>  #生成<span class="class">RSS</span>，需要配置路径，暂时默认，后面介绍
</pre></td></tr></table></figure>

<p>上面改动的不多，更多的是介绍了下功能，后面会相继介绍具体的修改方法。</p>
<p>好了，站点配置好了，我想发表一篇文章，怎么做呢？</p>
<ol>
<li><code>hexo new &quot;my new post&quot;</code></li>
<li><p>在<code>H:\hexo\source\_posts</code>中打开这个文件（打开方式用“记事本”即可），配置开头。</p>
<figure class="highlight"><table><tr><td class="gutter"><pre>1
2
3
4
5
6
</pre></td><td class="code"><pre><span class="label">title:</span> my new post <span class="preprocessor">#可以改成中文的，如“新文章”</span>
<span class="label">date:</span> <span class="number">2013</span>-<span class="number">05</span>-<span class="number">29</span> <span class="number">07</span>:<span class="number">56</span>:<span class="number">29</span> <span class="preprocessor">#发表日期，一般不改动</span>
<span class="label">categories:</span> blog <span class="preprocessor">#文章文类</span>
<span class="label">tags:</span> [博客，文章] <span class="preprocessor">#文章标签，多于一项时用这种格式</span>
---
<span class="preprocessor">#这里是正文，用markdown写，使用方法参照我原来的博客[Introduction to markdown](http://zipperary.com/2013/05/22/introduction-to-markdown/)</span>
</pre></td></tr></table></figure>
</li>
<li><p><code>hexo server</code>，访问<code>localhost:4000</code>预览效果。（退出server用Ctrl+c）</p>
</li>
<li><code>hexo deploy</code>，同步到github。访问网站看看效果。</li>
</ol>
<p>现在为止，我们已经搭建起博客，进行一些基本配置，并学会了怎么发表文章。后面会陆续介绍一些高级点的个性化设置，不过在此之前，你可以正常发表博客了。后面的文章你可以不看，有意者请跟随。</p>
<hr>
]]></content>
    <category scheme="http://blog.firedragonpzy.com.cn/tags/hexo/" term="hexo"/>
    <category scheme="http://blog.firedragonpzy.com.cn/categories/hexo/" term="hexo"/>
  </entry>
  <entry>
    <title type="html"><![CDATA[hexo系列教程：（一）搭建hexo博客 转]]></title>
    <link href="http://blog.firedragonpzy.com.cn/2013/12/12/hexo-guide-1/"/>
    <id>http://blog.firedragonpzy.com.cn/2013/12/12/hexo-guide-1/</id>
    <published>2013-12-12T09:28:53.000Z</published>
    <updated>2013-12-14T05:04:51.000Z</updated>
    <content type="html"><![CDATA[<p><strong>转载自：</strong><a href="http://zipperary.com/2013/05/28/hexo-guide-2/" target="_blank">http://zipperary.com/2013/05/28/hexo-guide-2/</a><br><strong><code>感谢moxie提供</code></strong></p>
<p>每日一曲【程序猿太累，休息会吧！】</p>
<embed src="http://www.xiami.com/widget/27050813_1772245372/singlePlayer.swf" type="application/x-shockwave-flash" width="257" height="33" wmode="transparent"></embed>

<p>本节来讲讲怎么搭建hexo博客。</p>
<p><strong>注意</strong>：本节教程只针对Windows用户，Linux和Mac用户请移步<a href="http://zespia.tw/hexo/zh-CN/docs/install.html" target="_blank">hexo安装</a>。<br><a id="more"></a></p>
<h3>安装Git</h3>
<p>下载 <a href="http://code.google.com/p/msysgit/" target="_blank">msysgit</a> 并执行即可完成安装。</p>
<h3>安装Node.js</h3>
<p>在 Windows 环境下安装 Node.js 非常简单，仅须<a href="http://nodejs.org/" target="_blank">下载</a>安装文件并执行即可完成安装。</p>
<h3>安装hexo</h3>
<p>利用 npm 命令即可安装。（在任意位置点击鼠标右键，选择<em>Git bash</em>）</p>
<figure class="highlight"><table><tr><td class="gutter"><pre>1
</pre></td><td class="code"><pre><span class="title">npm</span> install -g hexo
</pre></td></tr></table></figure>

<h3>创建hexo文件夹</h3>
<p>安装完成后，在你喜爱的文件夹下（如<code>H:\hexo</code>），执行以下指令(在<code>H:\hexo</code>内点击鼠标右键，选择<em>Git bash</em>)，Hexo 即会自动在目标文件夹建立网站所需要的所有文件。</p>
<figure class="highlight"><table><tr><td class="gutter"><pre>1
</pre></td><td class="code"><pre><span class="title">hexo</span> init
</pre></td></tr></table></figure>

<h3>本地查看</h3>
<p>现在我们已经搭建起本地的hexo博客了，执行以下命令(在<code>H:\hexo</code>)，然后到浏览器输入<code>localhost:4000</code>看看。</p>
<figure class="highlight"><table><tr><td class="gutter"><pre>1
2
</pre></td><td class="code"><pre><span class="title">hexo</span> generate
<span class="title">hexo</span> server
</pre></td></tr></table></figure>

<p>好了，至此，本地博客已经搭建起来了，只是本地哦，别人看不到的。下面，我们要部署到Github。</p>
<h3>注册Github账号</h3>
<p>已有账号可以跳过，没有的，请<a href="https://github.com/signup/free" target="_blank">在此</a>进行注册，很简单，这里就不介绍了。</p>
<h3>创建repository</h3>
<p>在自己<a href="https://github.com/" target="_blank">Github</a>主页右下角，创建一个新的repository。比如我的<a href="https://github.com/" target="_blank">Github</a>账号是<a href="https://github.com/firedragonpzy" target="_blank">firedragonpzy</a>，那么我应该创建的repository名字应该是<code>firedragonpzy.github.io</code>。</p>
<h3>部署</h3>
<p>编辑<code>_config.yml</code>(在<code>H:\hexo</code>下)。你在部署时，要把下面的<code>firedragonpzy</code>都换成你的账号名。</p>
<figure class="highlight"><table><tr><td class="gutter"><pre>1
2
3
4
</pre></td><td class="code"><pre><span class="method">deploy:</span>
  <span class="method">type:</span> github
  <span class="method">repository:</span> <span class="method">https:</span>//github.com/firedragonpzy/firedragonpzy.github.io.git
  <span class="method">branch:</span> master
</pre></td></tr></table></figure>

<p>执行下列指令即可完成部署。</p>
<figure class="highlight"><table><tr><td class="gutter"><pre>1
2
</pre></td><td class="code"><pre><span class="title">hexo</span> generate
<span class="title">hexo</span> deploy
</pre></td></tr></table></figure>

<p><strong>注意：</strong>有些新用户需要设置 ssh，否则上述命令会失败。ssh 的介绍和设置方法请看<a href="https://help.github.com/articles/generating-ssh-keys" target="_blank">官方教程</a>，不用担心，很简单。</p>
<p><strong>记住：</strong>每次修改本地文件后，需要<code>hexo generate</code>才能保存。每次使用命令时，都要在<code>H:\hexo</code>目录下。</p>
<p>Okay,我们的博客已经完全搭建起来了，在浏览器访问<code>firedragonpzy.github.io</code>就能看到你的成就了！</p>
<h3>bugs</h3>
<ol>
<li>有网友反应右键菜单中没有<code>git bash</code>选项，可以进入开始菜单找到<code>git bash</code>，然后通过<code>cd</code>进入相应目录执行命令。</li>
<li>在github部署完成之后，马上访问可能出现404错误，这是正常的，（最多）等待十分钟左右就可以访问了。</li>
<li>如果在<code>hexo d</code>之后出现<code>fatal: &#39;username.github.io&#39; does not appear to be a git repository</code>，一是检查 repo 的名字是否合乎规范、是否含有大写字母、config.yml 中的 deploy 配置是否正确，二是把 git bash 关掉，重新打开再执行命令。</li>
</ol>
<h3>tips</h3>
<p>hexo现在支持更加简单的命令格式了，比如：</p>
<p><code>hexo g</code> == <code>hexo generate</code></p>
<p><code>hexo d</code> == <code>hexo deploy</code></p>
<p><code>hexo s</code> == <code>hexo server</code></p>
<p><code>hexo n</code> == <code>hexo new</code></p>
<p>在下一节中，我们会介绍如何配置自己的网站，如何撰写和发表文章。</p>
<hr>
]]></content>
    <category scheme="http://blog.firedragonpzy.com.cn/tags/hexo/" term="hexo"/>
    <category scheme="http://blog.firedragonpzy.com.cn/categories/hexo/" term="hexo"/>
  </entry>
</feed>
